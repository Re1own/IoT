!function(a){define(function(require,b,c){function d(a){return!!a.then}function e(b,c){if(this.element="string"==typeof b?a("#"+b):b,this.options=c||{},!this.element)throw new Error("IntellMutex could not find the element: "+b);this.time=this.options.time,void 0===this.time&&(this.time=1e4),this.type=this.options.type||"warning",this.mutexts={}}e.prototype={add:function(b,c){var d=a('<div class="ui-tip-container ui-tip-'+this.type+'"><span class="ui-tip-icon"></span><lable>'+c+"</lable</div>");return this.mutexts[b]={element:d},this.element.append(d).translation(),this},setCtrl:function(a,b){this.mutexts[a].ctrl=b},_getElements:function(){var b=[];return a.each(this.mutexts,function(a,c){b.push(c.element)}),b},_show:function(b){a(b.element).show(),this.time&&(b.intval=setTimeout(function(){b.element.show()},this.time))},show:function(){var b=this.mutexts,c=this;a.each(b,function(a,b){d(b.ctrl)?b.ctrl.then(function(){c._show(b)}):(b.ctrl===!0||b.ctrl())&&c._show(b)})},hide:function(){var b=this._getElements(),c=this.mutexts;a.each(b,function(b,c){a(c).hide()}),a.each(c,function(a,b){clearTimeout(b.intval)})}},e.getIntellMutexTip=function(b,c){var d=c.SupportedScene,e=c.SupportedRules;if(void 0===e){e=[];for(var f in c.SupportedScenes)for(var g in c.SupportedScenes[f].SupportedRules)e.push(g)}var h='<span class="intell-mutex-tip">                    <span t="com.IntellMutex1Tip"></span> {content} <span t="com.IntellMutex2Tip"></span>                  </span>',i=[],j=b;return a.inArray(b,["HeatMap","ParkingDetection"])>-1&&(j="Normal"),d.some(function(a){return a!==j})?("FaceDetection"===j?(a.inArray("Normal",d)>-1&&i.push("ivs.IVSRule"),a.inArray("NumberStat",d)>-1&&i.push("ivs.PtzNumberStat"),(a.inArray("ParkingDetection",d)>-1||a.inArray("RetrogradeDetection",d)>-1)&&i.push("ivs.CarDetection"),a.inArray("Traffic",d)>-1&&i.push("TrafficJunction")):"NumberStat"===j?(a.inArray("Normal",d)>-1&&i.push("ivs.IVSRule"),a.inArray("FaceDetection",d)>-1&&i.push("appEventFaceDetection"),(a.inArray("ParkingDetection",d)>-1||a.inArray("RetrogradeDetection",d)>-1)&&i.push("ivs.CarDetection"),a.inArray("Traffic",d)>-1&&i.push("TrafficJunction")):"Normal"===j?(a.inArray("FaceDetection",d)>-1&&i.push("appEventFaceDetection"),a.inArray("NumberStat",d)>-1&&i.push("ivs.PtzNumberStat"),a.inArray("Traffic",d)>-1&&i.push("TrafficJunction")):"Traffic"===j&&(a.inArray("Normal",d)>-1&&i.push("ivs.IVSRule"),a.inArray("FaceDetection",d)>-1&&i.push("appEventFaceDetection"),a.inArray("NumberStat",d)>-1&&i.push("ivs.PtzNumberStat"),(a.inArray("ParkingDetection",d)>-1||a.inArray("RetrogradeDetection",d)>-1)&&i.push("ivs.CarDetection")),i.length>0?(i=a.map(i,function(a){return'<strong t="'+a+'"></strong>'}),h.replace("{content}",i.join(tl("com.Dou")))):null):null},c.exports=e})}(jQuery);