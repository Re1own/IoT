!function(a){var b,c,d,e;define(function(require,a,f){b=require("jsCore/pageBase"),c=require("jsCore/rpc"),d=require("jsCore/ability"),require("jsCore/modules/eventHandler"),e=require("jsCore/modules/timeSection"),f.exports=require("jsCore/pageTab"),f.exports.prototype.ala_pir=d.is("AlarmPir"),f.exports.prototype.ala_Link=d.is("AlarmPir").then(function(a){return!a||1!==webApp.ALARM_IN_NUMBER}),f.exports.prototype.ala_flash=d.is("Flash"),f.exports.prototype.ala_wireless=d.get("WirelessAlarm").then(function(a){return a&&a.Support}),f.exports.prototype.ala_emergency=d.get("WirelessAlarm").then(function(a){return a&&a.Support}),f.exports.prototype.ala_audioDetect=d.get("AudioFileManager").then(function(a){return 1!==webCaps.is_hide_AlarmAudioDetect&&a&&a.Support&&webApp.AUDIO_IN_NUMBER})}),define("ala_pir",function(require,f,g){function h(a){var b,c,d=/^#([0-9a-fA-f]{3}|[0-9a-fA-f]{6})$/,e=0,f="";if(/^(rgb|RGB)/.test(a))for(b=a.replace(/(?:\(|\)|rgb|RGB)*/g,"").split(","),e=b.length-1;e>=0;e--)c=Number(b[e]).toString(16),1===c.length&&(c="0"+c),f+=c;else d.test(a)&&(b=a.replace(/#/,"").split(""),6===b.length&&(f=b[4]+b[5]+b[2]+b[3]+b[0]+b[1]));return 6!==f.length?0:parseInt(f,16)}require("widget/js/dui.figure");var i,j,k,l=null,m=0,n=webApp.ALARM_IN_NUMBER-1,o=!!isEnable("is_has_detectPic"),p=null,q=0,r=0,s=!1,t=null,u="EventHandler",v={DetectVersion:["V1.0","V3.0"],MotionColumns:22,MotionDetectWindow:4,MotionRows:18},w=null;g.exports=b.extend({init:function(){l=this,j=l.$("#ala_pirDejitter").numberfield({max:100,min:0,allowDecimal:!1,allowNegative:!1});var b=a.Deferred();webApp.EventCaps?c.EventManager.getEventLink("AlarmLocal").done(function(c){var d=c.name,e=a.extend({},webApp.DefaultEvent),f=webApp.EventCaps;"default"===d[m][0]?e=f:d[m].each(function(a){e[a]=!0,"AlarmOutEnable"===a?e.AlarmOutLatch=f.AlarmOutLatch:"DejitterEnable"===a?e.DejitterRange=f.DejitterRange:"RecordEnable"===a&&(e.RecordLatch=f.RecordLatch)}),l.$("#ala_pirEventHandler").eventHandler(e),b.resolve()}).fail(function(){l.$("#ala_pirEventHandler").eventHandler(),b.resolve()}):(l.$("#ala_pirEventHandler").eventHandler(),b.resolve()),d.get("SupportPirMotionRegion").done(function(b){b?(s=!0,l.$("[btn-for = setAreaZone]").parent().show(),k=l.$("#pir_dialog").dialog({confirm:function(a,b){i=p,l._detachData(),"flash"===webApp.playMode?(flashplayer.hide(),pluginCanvas.hide()):"h5"===webApp.playMode&&(h5player.hide(),pluginCanvas.hide()),b.ui.close()},close:function(){l._detachData(),"flash"===webApp.playMode?(flashplayer.hide(),pluginCanvas.hide()):"h5"===webApp.playMode&&(h5player.hide(),pluginCanvas.hide())},resize:function(){if("flash"===webApp.playMode||"h5"===webApp.playMode){"flash"===webApp.playMode?flashplayer.cover("#pir_detzone"):"h5"===webApp.playMode&&h5player.cover(a("#pir_detzone"));var b=p[n].DetectWindow||[],c=[],d=[],e=new Array(v.MotionRows);if(b.length<v.MotionDetectWindow){a.each(b,function(a,b){c.push(b.Id)}),a.each(e,function(a){e[a]=0});for(var f=0;f<v.MotionDetectWindow;f++)-1===a.inArray(f,c)&&b.splice(f,0,{Id:f,Name:"Region "+(f+1),Region:e,Sensitive:isEnable("videodetect_default_sensitive")||58,Threshold:isEnable("videodetect_default_threshold")||4})}a.each(b,function(a,b){var c=h(k.find(".videodetect-regions a").eq(a).css("background-color"));d.push(b.Id+"@"+c+"-"+b.Region.join(":"))});var g=function(){pluginCanvas.cover("#pir_detzone",webApp.resolution.x+"*"+webApp.resolution.y),pluginCanvas.SetGridNum(v.MotionRows,v.MotionColumns),pluginCanvas.SetFuntionInfo("MotionDetect",d.join(" ")),pluginCanvas.SetCurrentDrawId(r)};"h5"===webApp.playMode?w&&w.done(function(a){webApp.resolution.x=a.width,webApp.resolution.y=a.height,g()}):g()}else plugin.cover("#pir_detzone")}}).detach().appendTo(document.body),k.dialog("setPosition",[310,615]),k.find("#pir_sen").slider({complete:function(a,b){p[n].DetectWindow[r].Sensitive=b.value}}),k.find("#pir_thr").slider({change:function(a,b){o&&k.find("#pir_figure").figure("threshold",b.value)},complete:function(a,b){p[n].DetectWindow[r].Threshold=b.value}}),o&&k.find("#pir_figure").figure({width:240,equal:1}).parent().show(),k.find("#pir_region").textfield({validReg:/[:"'{}\[\]<>\\,]/m,validRegRet:!1,errorHandle:"prevent",success:function(){p&&(p[n].DetectWindow[r].Name=a(this).val())}}),k.find(".videodetect-region-item").on("click",function(){r=a(this).data("index"),"flash"===webApp.playMode||"h5"===webApp.playMode?pluginCanvas.SetCurrentDrawId(r):plugin.SetCurrentDrawId(r);var b=p[n].DetectWindow[r];a(this).addClass("videodetect-region-current").siblings().removeClass("videodetect-region-current"),k.find("#pir_region").textfield("value",b.Name),k.find("#pir_sen").slider("value",b.Sensitive),k.find("#pir_thr").slider("value",b.Threshold)}),t={getConfig:function(){return c.PirAlarm.getParam(m)},getDefault:function(){return c.PirAlarm.getDefaultParam(m)},setConfig:function(){return c.PirAlarm.setParam(arguments[0],m)}},n="config",u="PirLink"):t={getConfig:function(){return c.ConfigManager.getConfig("Alarm")},getDefault:function(){return c.ConfigManager.getDefault("Alarm")},setConfig:function(){return c.ConfigManager.setConfig("Alarm",arguments[0])}}}),d.get("VideoDetectCaps").done(function(a){v=a}),b.done(function(){l.render()})},render:function(){l._getConfig()},destory:function(){k&&k.remove()},_getConfig:function(a){t.getConfig().done(function(b){i=b,l._renderValue(),a&&l.tip("success","com.OperateSuccessTip")}).fail(function(){a&&l.tip("error","com.OperateFailTip")})},_renderValue:function(){var a=i[n];l.$("#ala_pirEnable").prop("checked",a.Enable),j.numberfield("value",a[u].Dejitter),l.$("#ala_pirEventHandler").eventHandler("set",a[u])},onWorkPeriod:function(){e.open(i[n][u].TimeSection).done(function(a){i[n][u].TimeSection=a})},setAreaZone:function(){(-1!==webApp.DeviceType.indexOf("TPC")||"nacl"===plugin.type)&&plugin.RemoveAllMonDetectReg(),k.dialog("show"),p=a.extend(!0,[],i),o&&(k.find("#pir_figure").figure("start"),c.DevVideoDetect.attachMotionData(++q%65535),webApp.NotifyVersion&&common.devNotify.subscribe("devVideoDetect.notifyMotionData",l.showMotionFigure),a.subscribe("RECONNECTION",l._reconnect));var b=p[n].DetectWindow||[],d=[],e=[],f=new Array(v.MotionRows);if(b.length<v.MotionDetectWindow){a.each(b,function(a,b){d.push(b.Id)}),a.each(f,function(a){f[a]=0});for(var g=0;g<v.MotionDetectWindow;g++)-1===a.inArray(g,d)&&b.splice(g,0,{Id:g,Name:"Region "+(g+1),Region:f,Sensitive:isEnable("videodetect_default_sensitive")||58,Threshold:isEnable("videodetect_default_threshold")||4})}if(p[n].DetectWindow=b,a.each(b,function(a,b){var c=h(k.find(".videodetect-regions a").eq(a).css("background-color"));e.push(b.Id+"@"+c+"-"+b.Region.join(":")),k.find(".videodetect-region-item:eq("+a+")").data("index",b.Id)}),"flash"===webApp.playMode||"h5"===webApp.playMode){a(".ui-video-iconbar-hls").hide(),"flash"===webApp.playMode?(flashplayer.cover(a("#pir_detzone")),k.find("#pir_detzone_del").hide(),flashplayer.playPreview(1,0)):"h5"===webApp.playMode&&(k.find("#pir_detzone_del").hide(),w=new a.Deferred,h5player.playPreview(1,0,a("#pir_detzone"),null,w));var j=function(){pluginCanvas.cover("#pir_detzone",webApp.resolution.x+"*"+webApp.resolution.y),pluginCanvas.SetGridNum(v.MotionRows,v.MotionColumns),pluginCanvas.SetFuntionInfo("MotionDetect",e.join(" ")),pluginCanvas.SetCurrentDrawId(r)};"h5"===webApp.playMode?w&&w.done(function(a){webApp.resolution.x=a.width,webApp.resolution.y=a.height,j()}):j()}else plugin.cover("#pir_detzone",function(){plugin.SetModuleMode(1),-1!==webApp.DeviceType.indexOf("TPC")?(plugin.SetVisibleVideoWnd(1,m),login.chkAuthority("Monitor_0"+(m+1))?plugin.open(plugin.stream,m,1):plugin.SetVideoWndTip(m,tl("noVideoAuthoity"))):plugin.open(),plugin.SetGridNum(v.MotionRows,v.MotionColumns),plugin.SetFuntionInfo("MotionDetect",e.join(" ")),plugin.SetCurrentDrawId(r)});var s=b[r];k.find("#pir_region").textfield("value",s.Name),k.find("#pir_sen").slider("value",s.Sensitive),k.find("#pir_thr").slider("value",s.Threshold),plugin.addEvent("OutPutStringInfo",function(b,c){var d=c.split(" ");a.each(d,function(b,c){if(c){var d=c.split("-"),e=parseInt(d[0].split("@")[0]);a.each(d[1].split(":"),function(a,b){p[n].DetectWindow[e].Region[a]=parseInt(b)})}})}),a.subscribe("OutPutStringInfo",function(b,c){var d=c.split(" ");a.each(d,function(b,c){if(c){var d=c.split("-"),e=parseInt(d[0].split("@")[0]);a.each(d[1].split(":"),function(a,b){p[n].DetectWindow[e].Region[a]=parseInt(b)})}})})},onClearArea:function(){-1!==webApp.DeviceType.indexOf("TPC")||"nacl"===plugin.type?plugin.RemoveAllMonDetectReg():"flash"===webApp.playMode||"h5"===webApp.playMode?pluginCanvas.RemoveAllMonDetectReg():plugin.DelSelReg(-2)},onDelArea:function(){-1!==webApp.DeviceType.indexOf("TPC")||"nacl"===plugin.type?plugin.RemoveMonDetectReg(r):"flash"===webApp.playMode||"h5"===webApp.playMode?pluginCanvas.RemoveMonDetectReg(r):plugin.DelSelReg(-1)},_detachData:function(){o&&(k.find("#pir_figure").figure("stop"),c.DevVideoDetect.detachMotionData(q),webApp.NotifyVersion&&common.devNotify.detach("devVideoDetect.notifyMotionData"),a.unsubscribe("RECONNECTION",l._reconnect)),plugin.addEvent("OutPutStringInfo",null),a.subscribe("OutPutStringInfo",null),plugin.SetGridNum(0,0),plugin.hide()},_reconnect:function(){c.DevVideoDetect.attachMotionData(++q%65535),webApp.NotifyVersion&&common.devNotify.reconnect()},showMotionFigure:function(b){a.each(b.data,function(a,b){b.id===r&&k.find("#pir_figure").figure("push",b.threshold)})},onRefresh:function(){l._getConfig(!0)},onDefault:function(){t.getDefault().done(function(a){i[n]=a[n],l._renderValue(),l.tip("success","com.DefaultSuccessTip")}).fail(function(){l.tip("error","com.DefaultfailureTip")})},onSave:function(){var a=i[n];a.Enable=l.$("#ala_pirEnable").prop("checked"),a[u]=l.$("#ala_pirEventHandler").eventHandler("get"),a[u].Dejitter=j.numberfield("value");var b=i;s&&(b=a),t.setConfig(b).done(function(){l.tip("success","com.SaveSuccessTip")}).fail(function(){l.tip("error","com.SaveConfigFailTip")})}})}),define("ala_Link",function(require,f,g){var h,i,j,k=null,l=0,m=0;g.exports=b.extend({init:function(){k=this,i=k.$('[sel-for="onSelAlarmIn"]'),j=k.$("#ala_LinkDejitter").numberfield({max:100,min:0,allowDecimal:!1,allowNegative:!1}),webApp.EventCaps?c.EventManager.getEventLink("AlarmLocal").done(function(b){var c=b.name,d=a.extend({},webApp.DefaultEvent),e=webApp.EventCaps;"default"===c[m][0]?d=e:c[m].each(function(a){d[a]=!0,"AlarmOutEnable"===a?d.AlarmOutLatch=e.AlarmOutLatch:"DejitterEnable"===a?d.DejitterRange=e.DejitterRange:"RecordEnable"===a&&(d.RecordLatch=e.RecordLatch)}),k.$("#ala_LinkEventHandler").eventHandler(d)}).fail(function(){k.$("#ala_LinkEventHandler").eventHandler()}).always(function(){k.render()}):(k.$("#ala_LinkEventHandler").eventHandler(),k.render())},render:function(){i.empty(),d.is("AlarmPir").done(function(b){for(var c=b?webApp.ALARM_IN_NUMBER-1:webApp.ALARM_IN_NUMBER,d=0;c>d;d++)a("<option value="+d+"></option>").text(tl("per.Alarm")+(d+1)).appendTo(i);l=i.val(),k._getConfig()})},_getConfig:function(a){c.ConfigManager.getConfig("Alarm").done(function(b){h=b,k._renderValue(),a&&k.tip("success","com.OperateSuccessTip")}).fail(function(){a&&k.tip("error","com.OperateFailTip")})},_renderValue:function(){var a=h[l];k.$("#ala_LinkEnable").prop("checked",a.Enable),j.numberfield("value",a.EventHandler.Dejitter),k.$("#ala_LinkSensorModel").val(a.SensorType),k.$("#ala_LinkEventHandler").eventHandler("set",a.EventHandler)},onWorkPeriod:function(){e.open(h[l].EventHandler.TimeSection).done(function(a){h[l].EventHandler.TimeSection=a})},onSelAlarmIn:function(){k._saveTempJson(),l=i.val(),k._renderValue()},onRefresh:function(){k._getConfig(!0)},onDefault:function(){c.ConfigManager.getDefault("Alarm").done(function(a){d.is("AlarmPir").done(function(b){for(var c=b?webApp.ALARM_IN_NUMBER-1:webApp.ALARM_IN_NUMBER,d=0;c>d;d++)h[d]=a[d];k._renderValue(),k.tip("success","com.DefaultSuccessTip")})}).fail(function(){k.tip("error","com.DefaultfailureTip")})},_saveTempJson:function(){var a=h[l];a.Enable=k.$("#ala_LinkEnable").prop("checked"),a.EventHandler=k.$("#ala_LinkEventHandler").eventHandler("get"),a.EventHandler.Dejitter=j.numberfield("value"),a.SensorType=k.$("#ala_LinkSensorModel").val()},onSave:function(){k._saveTempJson(),c.ConfigManager.setConfig("Alarm",h).done(function(){k.tip("success","com.SaveSuccessTip")}).fail(function(){k.tip("error","com.SaveConfigFailTip")})}})}),define("ala_flash",function(require,d,e){function f(a){return a.find("input:checked").length===a.find("input").length}function g(b,c){var d=b.prop("checked");c.find("input").each(function(b,c){a(c).prop("checked",d)})}require("widget/js/dui.slider");var h,i,j,k,l,m,n=null;e.exports=b.extend({init:function(){n=this,j=n.$("#ala_falseEnable"),k=n.$("#ala_flashWeek"),l=n.$("#ala_flashAllWeek"),n.$("#ala_flashBrightness").slider({min:0,max:100,prompt:!1,change:function(a,b){m.Brightness=b.value},complete:function(a,b){m.Brightness=b.value}}),l.on("click",function(){g(l,k)}),k.on("click",function(){l.prop("checked",f(k))}),h=n.$("#ala_flashTime0").timefield(),i=n.$("#ala_flashTime1").timefield(),j.on("click",function(){n._onFlashEnable()}),n.render()},render:function(){n._getConfig()},_getConfig:function(a){c.ConfigManager.getConfig("FlashLight").done(function(b){m=b,n._renderValue(),a&&n.tip("success","com.OperateSuccessTip")}).fail(function(){a&&n.tip("error","com.OperateFailTip")})},_renderValue:function(){m.Enable?j.addClass("alarmconfig-flashbtn-on"):j.removeClass("alarmconfig-flashbtn-on"),n.$("#ala_flashBrightness").slider("value",m.Brightness);var b,c=k.find("input");n.$("#ala_flashPeriod").prop("checked",!0);for(var d=0;7>d;d++){var e=m.TimeSection[d],g=a.trim(e[0]).split(" ");getBitEx(g[0],0)?(b=g[1].split("-"),a(c[d]).prop("checked",!0),n.$("#ala_flashPeriod").prop("checked",!0)):a(c[d]).prop("checked",!1)}l.prop("checked",f(k)),i.timefield("value",b[0]),i.timefield("value",b[1])},_onFlashEnable:function(){m.Enable=!0,j.hasClass("alarmconfig-flashbtn-on")&&(m.Enable=!1),j.toggleClass("alarmconfig-flashbtn-on"),c.ConfigManager.setConfig("FlashLight",m).done(function(){})},onRefresh:function(){n._getConfig(!0)},onDefault:function(){c.ConfigManager.getDefault("FlashLight").done(function(a){m=a,n._renderValue(),n.tip("success","com.DefaultSuccessTip")}).fail(function(){n.tip("error","com.DefaultfailureTip")})},onSave:function(){var b=h.timefield("value"),d=i.timefield("value"),e=n.$("#ala_flashPeriod").prop("checked");k.find("input").each(function(c,f){m.TimeSection[c][0]=(a(f).prop("checked")&&e?"1 ":"0 ")+b+"-"+d}),c.ConfigManager.setConfig("FlashLight",m).done(function(){n.tip("success","com.SaveSuccessTip")}).fail(function(){n.tip("error","com.SaveConfigFailTip")})}})}),define("ala_wireless",function(require,d,f){var g,h,i,j=null,k=0,l=0;f.exports=b.extend({init:function(){j=this,i=j.$("#ala_wireDejitter").numberfield({max:100,min:0,allowDecimal:!1,allowNegative:!1}),webApp.EventCaps?c.EventManager.getEventLink("ExAlarm").done(function(b){var c=b.name,d=a.extend({},webApp.DefaultEvent),e=webApp.EventCaps;"default"===c[k][0]?d=e:c[k].each(function(a){d[a]=!0,"AlarmOutEnable"===a?d.AlarmOutLatch=e.AlarmOutLatch:"DejitterEnable"===a?d.DejitterRange=e.DejitterRange:"RecordEnable"===a&&(d.RecordLatch=e.RecordLatch)}),j.$("#ala_wireEventHandler").eventHandler(d)}).fail(function(){j.$("#ala_wireEventHandler").eventHandler()}):j.$("#ala_wireEventHandler").eventHandler(),h=j.$("#ala_wireName"),j._initWireName(),j.render()},_initWireName:function(){h.empty();for(var b=0;b<webApp.ALARM_IN_NUMBER;b++)a("<option value="+b+"></option>").text(b+1).appendTo(h);l=h.val()},render:function(){j._getConfig()},_getConfig:function(a){c.ConfigManager.getConfig("ExAlarm").done(function(b){g=b,j._renderValue(),a&&j.tip("success","com.OperateSuccessTip")}).fail(function(){a&&j.tip("error","com.OperateFailTip")})},_renderValue:function(){var a=g[l];j.$("#ala_wireEnable").prop("checked",a.Enable),j.$("#ala_wireCustomName").val(a.Name),i.numberfield("value",a.EventHandler.Dejitter),j.$("#ala_wireEventHandler").eventHandler("set",a.EventHandler)},onWorkPeriod:function(){e.open(g[l].EventHandler.TimeSection).done(function(a){g[l].EventHandler.TimeSection=a})},onSelWireName:function(){j._saveTempJson(),l=h.val(),j._renderValue()},onRefresh:function(){j._getConfig(!0)},onDefault:function(){c.ConfigManager.getDefault("ExAlarm").done(function(a){g=a,j._renderValue(),j.tip("success","com.DefaultSuccessTip")}).fail(function(){j.tip("error","com.DefaultfailureTip")})},_saveTempJson:function(){var a=g[l];a.Enable=j.$("#ala_wireEnable").prop("checked"),a.Name=j.$("#ala_wireCustomName").val(),a.EventHandler=j.$("#ala_wireEventHandler").eventHandler("get"),a.EventHandler.Dejitter=i.numberfield("value")},onSave:function(){j._saveTempJson(),c.ConfigManager.setConfig("ExAlarm",g).done(function(){j.tip("success","com.SaveSuccessTip")}).fail(function(){j.tip("error","com.SaveConfigFailTip")})}})}),define("ala_audioDetect",function(require,d,f){var g,h,i=null,j=0;require("widget/js/dui.slider"),f.exports=b.extend({init:function(){i=this,i.$("#ala_audioThreshold").slider({min:0,max:100,change:function(a,b){g[0].MinVolume=b.value},complete:function(a,b){g[0].MinVolume=b.value}}),h=i.$("#ala_audioDejitter").numberfield({max:100,min:0,allowDecimal:!1,allowNegative:!1}),webApp.EventCaps?c.EventManager.getEventLink("AudioDetect").done(function(b){var c=b.name,d=a.extend({},webApp.DefaultEvent),e=webApp.EventCaps;"default"===c[j][0]?d=e:c[j].each(function(a){d[a]=!0,"AlarmOutEnable"===a?d.AlarmOutLatch=e.AlarmOutLatch:"DejitterEnable"===a?d.DejitterRange=e.DejitterRange:"RecordEnable"===a&&(d.RecordLatch=e.RecordLatch)}),i.$("#ala_audioEventHandler").eventHandler(d)}).fail(function(){i.$("#ala_audioEventHandler").eventHandler()}):i.$("#ala_audioEventHandler").eventHandler(),i.render()},render:function(){i._getConfig()},_getConfig:function(a){c.ConfigManager.getConfig("AudioDetect").done(function(b){g=b,i._renderValue(),a&&i.tip("success","com.OperateSuccessTip")}).fail(function(){a&&i.tip("error","com.OperateFailTip")})},_renderValue:function(){var a=g[0];i.$("#ala_audioEnable").prop("checked",a.Enable),i.$("#ala_audioThreshold").slider("value",a.MinVolume),h.numberfield("value",a.EventHandler.Dejitter),i.$("#ala_audioEventHandler").eventHandler("set",a.EventHandler)},onWorkPeriod:function(){e.open(g[0].EventHandler.TimeSection).done(function(a){g[0].EventHandler.TimeSection=a})},onRefresh:function(){i._getConfig(!0)},onDefault:function(){c.ConfigManager.getDefault("AudioDetect").done(function(a){g=a,i._renderValue(),i.tip("success","com.DefaultSuccessTip")}).fail(function(){i.tip("error","com.DefaultfailureTip")})},onSave:function(){var a=g[0];a.Enable=i.$("#ala_audioEnable").prop("checked"),a.EventHandler=i.$("#ala_audioEventHandler").eventHandler("get"),a.EventHandler.Dejitter=h.numberfield("value"),c.ConfigManager.setConfig("AudioDetect",g).done(function(){i.tip("success","com.SaveSuccessTip")}).fail(function(){i.tip("error","com.SaveConfigFailTip")})}})}),define("ala_emergency",function(require,d,e){var f,g=null,h=0;e.exports=b.extend({init:function(){g=this,webApp.EventCaps?c.EventManager.getEventLink("RemoteCtrl.EventHandlerList").done(function(b){var c=b.name,d=a.extend({},webApp.DefaultEvent),e=webApp.EventCaps;"default"===c[h][0]?d=e:c[h].each(function(a){d[a]=!0,"AlarmOutEnable"===a?d.AlarmOutLatch=e.AlarmOutLatch:"DejitterEnable"===a?d.DejitterRange=e.DejitterRange:"RecordEnable"===a&&(d.RecordLatch=e.RecordLatch)}),g.$("#ala_emerEventHandler").eventHandler(d)}).fail(function(){g.$("#ala_emerEventHandler").eventHandler()}):g.$("#ala_emerEventHandler").eventHandler(),g.render()},render:function(){g._getConfig()},_getConfig:function(a){c.ConfigManager.getConfig("RemoteCtrl.EventHandlerList").done(function(b){f=b,g._renderValue(),a&&g.tip("success","com.OperateSuccessTip")}).fail(function(){a&&g.tip("error","com.OperateFailTip")})},_renderValue:function(){g.$("#ala_emerEventHandler").eventHandler("set",f[0].EventHandler)},onRefresh:function(){g._getConfig(!0)},onDefault:function(){c.ConfigManager.getDefault("RemoteCtrl.EventHandlerList").done(function(a){f=a,g._renderValue(),g.tip("success","com.DefaultSuccessTip")}).fail(function(){g.tip("error","com.DefaultfailureTip")})},onSave:function(){f[0].EventHandler=g.$("#ala_emerEventHandler").eventHandler("get"),c.ConfigManager.setConfig("RemoteCtrl.EventHandlerList",f).done(function(){g.tip("success","com.SaveSuccessTip")}).fail(function(){g.tip("error","com.SaveConfigFailTip")})}})})}(jQuery);