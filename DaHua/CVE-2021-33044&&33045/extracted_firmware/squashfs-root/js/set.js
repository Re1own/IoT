!function(a){define(function(require,b,c){function d(b){if(-1===webApp.DeviceType.indexOf("TPC")&&-1===webApp.DeviceType.indexOf("SD")||!p||p.advanceShow("checkAdvAuth",this)){var c=a(b.currentTarget);return c.hasClass(m)?c.removeClass(m).next("ul").hide():(o.menuElem.find(".set-menu").removeClass(m).next("ul").hide(),c.addClass(m).next("ul").show()),!1}}function e(b){var c=a(b.currentTarget),d=o.menuElem.find(".set-item."+n),e=d.data("page");c.attr("filename")!=d.attr("filename")&&e&&a.isFunction(e.leave)&&e.leave(),o.menuCont.find('[data-for="'+d.attr("filename")+'"]').hide(),o.menuElem.find(".set-item").removeClass(n),c.addClass(n);var f=c.data("page"),g=c.attr("filename");if("undefined"!=typeof Site&&(Site.currentPage.is={},Site.currentPage.is[g]=!0),f)f.element.show(),f.render();else{var h=a('<div id="page_'+g+'" data-for="'+g+'"></div>');h.appendTo(o.menuCont);var i,j;"vsp"===c.attr("vsp")?(i="platformHtm/"+g+".js"+q,j="platformHtm/"+g+".htm"+q):(i="js/"+g+".js"+q,j="html/"+g+".htm"+q),require.async([i,j],function(b,d){if(h.html(d).translation(),a.isFunction(b))c.data("page",new b({element:h}));else{if(Page[g].element=h,Page&&Page[g]&&Page[g].init&&Page[g].init(),Page&&Page[g]&&Page[g].translate&&Page[g].translate(),Page[g].Tab)for(var e in Page[g].Tab)Page[g].Tab[e].translate&&Page[g].Tab[e].translate();c.data("page",Page[g])}})}}function f(b){var c=[];a.each(b,function(b,d){if(d.condition===!1)o.menuElem.find("li[category="+d.category+"]").remove();else{var e=o.menuElem.find("li[category="+d.category+"]");"advanced"!==d.category&&e.show(),a.each(d.member,function(b,d){if(void 0!==d.condition){var f=e.find("li[filename="+d.filename+"]"),g=d.condition;"function"===a.type(g)&&(g=g()),"boolean"===a.type(g)?g?f.show():f.remove():"function"===a.type(g.done)&&(g.done(function(a){a?f.show():f.remove()}),c.push(g))}})}}),a.when.apply(null,c).always(function(){return o.menuElem.find("ul:not(:has(li))").closest("li").remove(),webApp.hideIVS===!0?o.menuElem.find("[filename = iExclusionConfig],[filename = ivsConfig],[filename = ipcHeatMapConfig]").hide():webApp.hideIVS===!1&&o.menuElem.find("[filename = iExclusionConfig],[filename = ivsConfig],[filename = ipcHeatMapConfig]").show(),s?!1:(o.menuElem.find(".set-menu:first").click(),void o.menuElem.find(".set-item:first").click())})}function g(b){for(var c=a.extend(!0,[],b),d=0;d<c.length;d++){for(var e=c[d].member,f=0;f<e.length;f++)e[f].authority&&!k.chkAuthority(e[f].authority)&&e.splice(f--,1);0===e.length&&c.splice(d--,1)}return c}function h(){return[{category:"camera",t:"med.CameraSet",member:[{filename:webCaps.is_show_QT_VidAnalyse_VidInAttr||-1!==webApp.DeviceType.indexOf("TPC")?"cameraNewConfig":"cameraConfig",t:"med.VideoInputConfig",authority:"VideoInputConfig",condition:j.get("CameraAttribute").then(function(a){return-1===webApp.DeviceType.indexOf("SD")&&-1===webApp.DeviceType.indexOf("CA-")?!0:a&&a.Support})},{filename:"encodeConfig",t:"med.Video",authority:"EncodeConf"},{filename:"audioConfig",t:"med.Audio",authority:"EncodeConf",condition:j.get("IOCaps").then(function(a){var b=a&&a.caps.SupportControlSpeaker;return webApp.AUDIO_IN_NUMBER&&!isEnable("is_8M_Flash")||b})}]},{category:"sdIVS",t:"ivs.IVSSet",condition:!webCaps.is_show_newIntelli&&!!webApp.IsSDTraficIntel,member:[{filename:"ivsSDConfig",t:"ivs.IVSSet",authority:"IntelliConf",condition:!!webApp.IsSDTraficIntel},{filename:"ivsTrafficConfig",t:"ivs.AdvancedParams",authority:"IntelliConf",condition:!!webApp.IsSDTraficIntel},{filename:"ivsTrafficDefault",t:"com.Default",authority:"IntelliConf",condition:!!webApp.IsSDTraficIntel}]},{category:"network",t:"net.NetworkSettings",member:[{filename:"networkConfig",t:"net.TcpOrIp",authority:"NetConf"},{filename:"connetConfig",t:"net.Port",authority:"NetConf"},{filename:"PPPoEConfig",t:"net.PPPoE",authority:"NetConf",condition:!isEnable("is_hide_PPPoE")},{filename:"DDNSConfig",t:"net.Ddns",authority:"NetConf",condition:!webCaps.hideAllDDNS},{filename:"ipAuthorityConfig",t:"med.IPPurview",condition:!webApp.newAuthority&&k.chkAuthority("NetConf")},{filename:"emailConfig",t:"net.SMTPEmail",authority:"NetConf"},{filename:"UPnPConfig",t:"pfm.UPnP",authority:"NetConf",condition:!webCaps.hideUPnP},{filename:"SNMPConfig",t:"net.SNMP",authority:"NetConf",condition:!(!isEnable("show_SNMP_config")||isEnable("is_8M_Flash"))},{filename:"bonjourConfig",t:"itc.Bonjour",authority:"NetConf",condition:!!isEnable("show_bonjour_config")},{filename:"broadcastConfig",t:"net.Multicast",authority:"NetConf"},{filename:"autoRegisterConfig",t:"sys.AutoRegister",authority:"NetConf",condition:!!webCaps.show_auto_register},{filename:"wifiConfig",t:"net.WIFI",authority:"NetConf",condition:a.when(j.is("WIFI"),j.get("AroudWifiSearch")).then(function(a,b){return webApp.WIFI=a,!(!a||isEnable("is_8M_Flash"))||!(!b||!b.Support)})},{filename:"IEEE802",t:"net.Wire8021x",authority:"NetConf",condition:j.get("IEEE802_1X").then(function(a){return a&&!isEnable("is_8M_Flash")})},{filename:"VPNConfig",t:"net.Vpn",authority:"NetConf",condition:j.get("VPN").then(function(a){return a&&!isEnable("is_8M_Flash")})},{filename:"LDAPConfig",t:"sys.Ldap",authority:"NetConf",condition:!(!isEnable("is_show_LDAP")||isEnable("is_8M_Flash"))},{filename:"QoSConfig",t:"net.Qos",authority:"NetConf"},{filename:"3gnetConfig",t:(webApp.Is4G,"net.4G"),authority:"NetConf",condition:webApp.Is4G||webApp.Is3G},{filename:"platformConfig",t:"com.AccessPlatform",authority:"NetConf",condition:!(!isEnable("is_show_platform")||!/simpchinese/i.test(global.currentLanguage)&&!webCaps.is_platform_showOnvif)},{filename:"ATMConfig",t:"ivs.ATMOsd",condition:!(!isEnable("show_ATM_config")||isEnable("is_8M_Flash"))},{filename:"httpsConfig",t:"net.HTTPs",condition:j.get("SystemService").then(function(a){return!(a&&a.Support)&&isEnable("is_show_HTTPS")&&k.chkAuthority("NetConf")},function(){return isEnable("is_show_HTTPS")&&k.chkAuthority("NetConf")})},{filename:"RTSPConfig",t:"RTSP",authority:"NetConf",condition:!!webApp.GongAnDetect},{filename:"RTMPConfig",t:"RTMP",authority:"NetConf",condition:!(!webCaps.Customize||!webCaps.Customize.RTMP)},{filename:"cameraLocationConfig",t:"com.GOTO",authority:"NetConf",condition:j.get("UWBConfig").then(function(a){return a&&a.Support})}]},{category:"ptz",t:"per.PtzSet",condition:-1!==webApp.DeviceType.indexOf("SD")&&!webApp.NoIntelliPreset||webApp.isSpecialPtz,member:[{filename:"ptzConfigSD",t:"sys.Protocol",authority:"PtzConfig",condition:a.when(j.get("HasPtz"),j.get("PTZCaps"),j.get("PTZFunctionViaApp")).then(function(a,b,c){return-1===webApp.DeviceType.indexOf("TPC")&&!webApp.isSpecialPtz&&a&&(b&&b.PtzDevice||!c)})},{filename:"ptzConfig",t:"sys.Protocol",authority:"PtzConfig",condition:a.when(j.get("HasPtz"),j.get("IsSimplifiedPtz")).then(function(a,b){return a&&(-1!==webApp.DeviceType.indexOf("TPC")||webApp.isSpecialPtz&&!b)})},{filename:"functioncfg-TPC",t:"ivs.Function",authority:"PtzConfig",condition:j.get("PtzFunctionMenu").then(function(a){return a&&a.Support||webApp.isSpecialPtz})},{filename:"fanSector",t:"w_RoadInfo",authority:"MPTZ",condition:j.get("PtzViewSector").then(function(a){return a&&a.Support})},{filename:"presetBackupConfig",t:"com.PresetBackup",authority:"PtzConfig",condition:j.get("PtzFunctionMenu").then(function(a){return a&&a.Support&&-1!==webApp.DeviceType.indexOf("TPC")})}]},{category:"outDevice",t:"per.Peripheral",condition:-1!==webApp.DeviceType.indexOf("TPC"),member:[{filename:"IRLightTPC",t:"itc.IRLight",authority:"LightingConf",condition:j.get("LightingControl").then(function(a){var b=a&&a.Support;return a&&0===a.FarLightNumber&&0===a.NearLightNumber&&(b=!1),b})},{filename:"wiperConfig",t:"per.RainBrush",authority:"RainBrushConfig",condition:j.get("RainBrushControl").then(function(a){return a&&a.Support})},{filename:"fanConfig",t:"itc.Fan",authority:"PtzFan",condition:j.get("PTZCaps").then(function(a){return a&&a.PtzFan&&a.PtzFan.Support})},{filename:"heaterConfig",t:"ivs.Heater",authority:"PtzHeater",condition:j.get("PTZCaps").then(function(a){return a&&a.PtzHeater&&a.PtzHeater.Support})}]},{category:"smartThermal",t:"com.SmartThermal",condition:-1!==webApp.DeviceType.indexOf("TPC"),member:[{filename:"iExclusionConfig",t:"ivs.IvsScheme",authority:"IntelliConf",condition:a.when(j.get("IVSCaps"),j.is("DSPConflict",!0)).then(function(b,c){var d=!c&&(webCaps.is_new_IVSUI?!0:webApp.IsIPCIntel)&&b&&-1!==a.inArray("Normal",b.SupportedScene),e=!c&&(webCaps.is_new_IVSUI?!0:webApp.IsIPCIntel)&&b&&(-1!==a.inArray("FaceDetection",b.SupportedScene)||-1!==a.inArray("SDFaceDetect",b.SupportedScene)),f=!c&&b&&webCaps.is_new_IVSUI;return-1!==webApp.DeviceType.indexOf("TPC")?d||e:f})},{filename:"ivsConfig",t:"ivs.IVSRule",authority:"IntelliConf",condition:a.when(j.get("IVSCaps"),j.is("DSPConflict",!0)).then(function(b,c){return!c&&(webCaps.is_new_IVSUI?!0:webApp.IsIPCIntel)&&b&&-1!==a.inArray("Normal",b.SupportedScene)})},{filename:"ipcFaceNewConfig",t:"appEventFaceDetection",authority:"IntelliConf",condition:a.when(j.get("IVSCaps"),j.is("DSPConflict",!0)).then(function(b,c){return!c&&(webCaps.is_new_IVSUI?!0:webApp.IsIPCIntel)&&b&&(-1!==a.inArray("FaceDetection",b.SupportedScene)||-1!==a.inArray("SDFaceDetect",b.SupportedScene))})},{filename:"fireAlarmConfig",t:"com.FireAlarm",authority:"FireWarning",condition:j.get("FireWarning").then(function(a){return a&&a.Support})},{filename:"hotspoConfig",t:"com.HotTrace",authority:"HotTrace",condition:j.get("HotColdSpotTrace").then(function(a){return a})},{filename:"picInpicConfig",t:"com.PicInPic",authority:"PicInPic",condition:j.get("PicInPic").then(function(a){return webApp.CHANNEL_NUMBER>1&&a&&a.Support})},{filename:"thermalLinkConfig",t:"com.ThermalLink",condition:webApp.CHANNEL_NUMBER>1&&-1!==webApp.DeviceType.indexOf("SD")&&(k.chkAuthority("FireWarning")||k.chkAuthority("HotTrace"))},{filename:"autoFocusConfig",t:"med.AutoFocus",condition:a.when(j.get("PresetFocusROI"),j.get("IntelligentFocus")).then(function(a,b){return a&&a.Support&&b&&b.Support})}]},{category:"event",t:"sto.EventManage",member:[{filename:"eventManageConfig",t:"ivs.EventManage",condition:!!isEnable("is_show_eventManage")&&(k.chkAuthority("VideoConfig")||k.chkAuthority("IntelliConf"))&&-1===webApp.DeviceType.indexOf("TPC")},{filename:"videoDetectConfig",t:"med.VideoCheck",authority:"VideoConfig",condition:j.get("VideoDetectCaps").then(function(a){return a&&(a.SupportMotion||a.SupportBlind||a.UnFocusDetect||a.SupportMovedDetect)})},{filename:"alarmAudioConfig",t:"appEventAudioDetect",authority:"VideoConfig",condition:a.when(j.get("AudioDetectCaps"),i.DevAudioInput.getCollect()).then(function(){return arguments[0]&&(arguments[0].AnomalyDetect||arguments[0].MutationDetect||arguments[0].VolumeDetect)&&arguments[1]})},{filename:"iExclusionConfig",t:"ivs.IvsScheme",authority:"IntelliConf",condition:a.when(j.get("IVSCaps"),j.is("DSPConflict",!0)).then(function(a,b){return!b&&a&&!(!a.SupportedScene||!a.SupportedScene.length)&&webCaps.is_new_IVSUI&&-1===webApp.DeviceType.indexOf("TPC")&&!isEnable("is_hide_iExclusionConfig")})},{filename:"ivsTrafficPark",t:"ivs.IllegalParkCapture",authority:"IntelliConf",condition:a.when(j.get("VideoAnalyse"),j.is("DSPConflict",!0)).then(function(a,b){return!b&&a&&a.SupportedScene&&a.SupportedScene.indexOf("TrafficPark")>-1?!0:!1})},{filename:"ivsIntelliCityMgr",t:"ivs.IntelliCityMgr",authority:"IntelliConf",condition:a.when(j.get("VideoAnalyse"),j.is("DSPConflict",!0)).then(function(a,b){return!b&&a&&a.SupportedScene&&a.SupportedScene.indexOf("IntelliCityMgr")>-1?!0:!1})},{filename:a.browser.chrome&&a.browser.version>41&&-1===webApp.DeviceType.indexOf("TPC")||"flash"===webApp.playMode||"h5"===webApp.playMode?"ivsNaclConfig":"ivsConfig",t:webCaps.NewGlobalCamera?"ivs.DeepIVS":"ivs.IVSRule",authority:"IntelliConf",condition:a.when(j.get("IVSCaps"),j.is("DSPConflict",!0)).then(function(b,c){return!c&&(webCaps.is_new_IVSUI?!0:webApp.IsIPCIntel)&&b&&-1!==a.inArray("Normal",b.SupportedScene)&&-1===webApp.DeviceType.indexOf("TPC")})},{filename:"ipcFireDetectConfig",t:"FireDetection",authority:"IntelliConf",condition:a.when(j.get("IVSCaps"),j.is("DSPConflict",!0)).then(function(b,c){return!c&&(webCaps.is_new_IVSUI?!0:webApp.IsIPCIntel)&&b&&-1!==a.inArray("SmokeFire",b.SupportedScene)&&-1===webApp.DeviceType.indexOf("TPC")})},{filename:"parkingSpace",t:"ivs.CarposManager",authority:"IntelliConf",condition:a.when(j.get("IVSCaps"),j.is("DSPConflict",!0)).then(function(b,c){return!c&&(webApp.IsIPCIntel||webApp.IsSDIntel)&&b&&a.inArray("ParkingSpace",b.SupportedScene)>-1})},{filename:"ipcStereopsisConfig",t:"com.ipcStereopsis",authority:"IntelliConf",condition:a.when(j.get("IVSCaps"),j.is("DSPConflict",!0)).then(function(b,c){return!c&&(webCaps.is_new_IVSUI?!0:webApp.IsIPCIntel)&&b&&-1!==a.inArray("StereoVision",b.SupportedScene)&&-1===webApp.DeviceType.indexOf("TPC")})},{filename:"ipcStereoFlowrateConfig",t:"ivs.PtzNumberStat",authority:"IntelliConf",condition:a.when(j.get("IVSCaps"),j.is("DSPConflict",!0)).then(function(b,c){return!c&&(webCaps.is_new_IVSUI?!0:webApp.IsIPCIntel)&&b&&-1!==a.inArray("StereoNumber",b.SupportedScene)&&-1===webApp.DeviceType.indexOf("TPC")})},{filename:"ipcFaceNewConfig",t:function(){var b="appEventFaceDetection";return j.get("IVSCaps").done(function(c){c&&-1!==a.inArray("FaceAnalysis",c.SupportedScene)&&(b="FaceAnalysis")}),b}(),authority:"IntelliConf",condition:a.when(j.get("IVSCaps"),j.is("DSPConflict",!0)).then(function(b,c){return!c&&(webCaps.is_new_IVSUI?!0:webApp.IsIPCIntel)&&b&&(-1!==a.inArray("FaceDetection",b.SupportedScene)||-1!==a.inArray("SDFaceDetect",b.SupportedScene)||-1!==a.inArray("FaceAnalysis",b.SupportedScene))&&-1===webApp.DeviceType.indexOf("TPC")})},{filename:"flowrateConfig",t:"ivs.PtzNumberStat",authority:"IntelliConf",condition:a.when(j.get("IVSCaps"),j.is("DSPConflict")).then(function(b,c){return!c&&(webApp.IsIPCIntel||webApp.IsSDIntel)&&b&&(-1!==a.inArray("NumberStat",b.SupportedScene)||-1!==a.inArray("NumberStatPlan",b.SupportedScene))})},{filename:"ipcShootingScore",t:"ivs.ShootingScoreRecognition",authority:"IntelliConf",condition:a.when(j.get("IVSCaps"),j.is("DSPConflict")).then(function(b,c){return!c&&webApp.IsIPCIntel&&b&&-1!==a.inArray("SCR",b.SupportedScene)})},{filename:"temperAlarmConfig",t:"com.TemperatureAlarm",authority:"TemperatureConfig",condition:j.get("RadioMetry").then(function(a){return a&&a.Support})},{filename:"ipcHeatMapConfig",t:"ivs.PtzHeatMap",authority:"IntelliConf",condition:a.when(j.get("IVSCaps"),j.is("DSPConflict")).then(function(b,c){return!c&&(webApp.IsIPCIntel||webApp.IsSDIntel)&&b&&(-1!==a.inArray("HeatMap",b.SupportedRules)||-1!==a.inArray("HeatMap",b.SupportedScene)||-1!==a.inArray("HeatMapPlan",b.SupportedScene))})},{filename:"ipcIntellentCarConfig",t:"ivs.CarDetection",authority:"IntelliConf",condition:a.when(j.get("IVSCaps"),j.is("DSPConflict")).then(function(b,c){return!c&&webApp.IsIPCIntel&&b&&-1!==a.inArray("ParkingDetection",b.SupportedRules)&&webCaps.is_new_IVSUI!==!0})},{filename:"ipcIntellTrafficConfig",t:isEnable("is_numberOK_Gate")?"ANPR":"TrafficJunction",authority:"IntelliConf",condition:a.when(j.get("IVSCaps"),j.is("DSPConflict")).then(function(b,c){return!c&&b&&(-1!==a.inArray("Traffic",b.SupportedScene)||-1!==a.inArray("Gate",b.SupportedScene))&&!isEnable("is_hide_TrafficTollGate")})},{filename:"ivsStereoBehaviorConfig",t:"StereoBehavior",authority:"IntelliConf",condition:a.when(j.get("IVSCaps"),j.is("DSPConflict")).then(function(b,c){return!c&&b&&-1!==a.inArray("StereoBehavior",b.SupportedScene)})},{filename:"ivsObjectDetectConfig",t:"ivs.VideoStructrue",authority:"IntelliConf",condition:a.when(j.get("IVSCaps"),j.is("DSPConflict")).then(function(b,c){return!c&&b&&-1!==a.inArray("ObjectDetect",b.SupportedScene)})},{filename:"alarmConfig",t:"per.AlarmSet",authority:"Alarm",condition:!!webApp.ALARM_IN_NUMBER},{filename:"abnormalConfig",t:"per.AbnorDeal",authority:"AlarmConf"},{filename:"analogCollectConfig",t:"ivs.CollectModule",authority:"IntelliConf",condition:j.get("ExternalSensorCaps").then(function(a){return!(!a||!a.Support)||!(!a||!a.SupportLabelInfo)})}]},{category:"temper",t:"com.TemperConfig",condition:-1!==webApp.DeviceType.indexOf("TPC"),member:[{filename:"temperConfig",t:"com.RuleSet",authority:"TemperatureConfig",condition:j.get("RadioMetry").then(function(a){return a&&a.Support})},{filename:"globalConfig",t:"ivs.CompleteConfigure",authority:"TemperatureConfig",condition:j.get("RadioMetry").then(function(a){return a&&a.Support})},{filename:"heatmapConfig",t:"com.HeatMap",authority:"TemperatureConfig",condition:j.get("RadioMetry").then(function(a){return a&&a.Support})}]},{category:"storage",t:"sto.StorageManage",member:[{filename:"recordPlanConfig",t:"com.Tschedule",authority:"RecordConf"},{filename:"recordStorageConfig",t:"sto.Storage",authority:"RecordConf"},{filename:"recordCtrlConfig",t:"med.VideoControl",authority:"Record"}]},{category:"system",t:"sys.SysManage",member:[{filename:"generalConfig",t:"sys.LocalSet",authority:"GeneralConf"},{filename:"userManageConfig",t:"sys.Account",condition:isEnable("is_show_ModifyPsw")&&"anonymity"!==k.getLoginInfo().username||k.chkAuthority("Account")},{filename:"securityManageConfig",t:"sys.SafeOpr",condition:a.when(j.get("StreamAuthority"),j.get("SSHD")).then(function(a,b){return k.chkAuthority("AuthSecurity")||"admin"===k.getLoginInfo().username&&(a&&a.Rtsp||b&&b.Support||webCaps.is_show_PswReset)})},{filename:"wiperConfig",t:"per.Peripheral",condition:a.when(j.get("RainBrushControl"),j.get("IsProtectCover"),j.get("SupportPtzFunction"),j.get("PTZCaps"),j.get("WireLessLora")).then(function(a,b,c,d,e){return(c&&k.chkAuthority("ComConf")||!c&&k.chkAuthority("PtzConfig")||k.chkAuthority("RainBrushConfig"))&&b||k.chkAuthority("RainBrushConfig")&&a&&a.Support&&-1===webApp.DeviceType.indexOf("TPC")||k.chkAuthority("PtzHeater")&&d&&(d.PtzHeater&&d.PtzHeater.Support||d.ClearFrostHeater&&d.ClearFrostHeater.Support)&&-1===webApp.DeviceType.indexOf("TPC")||k.chkAuthority("PtzFan")&&d&&d.PtzFan&&d.PtzFan.Support&&-1===webApp.DeviceType.indexOf("TPC")||k.chkAuthority("RainBrushConfig")&&e&&e.Support})},{filename:"ptzConfig",t:"per.PtzSetting",authority:"PtzConfig",condition:a.when(j.get("IsProtectCover"),j.get("HasPtz"),j.get("PtzFunctionMenu"),j.get("ExternalSensorCaps"),j.get("SupportPtzFunction")).then(function(a,b,c,d,e){return a||e||d&&d.Support&&"RS-485"===d.NetworkingMode?!1:b&&!(c&&c.Support)&&!isEnable("is_8M_Flash")&&-1===webApp.DeviceType.indexOf("SD_CA_ICT")&&-1===webApp.DeviceType.indexOf("IPC-HDB3200C")})},{filename:"commConfig",t:"itc.SerialSet",authority:"ComConf",condition:!!isEnable("show_comm_config")},{filename:"defaultConfig",t:"sys.DefaultSetting",authority:"DefaultConfig"},{filename:"backupConfig",t:"sys.ConfigIO",authority:"DefaultConfig"},{filename:"remoteConfig",t:"com.Remote",authority:"Alarm",condition:j.get("WirelessAlarm").then(function(a){return a&&a.Support})},{filename:"autoMaintainConfig",t:"sys.AutoMaintain",authority:"AutoMaintain"},{filename:webApp.CloudUpgrade?"cloudUpgradeConfig":"upgradeConfig",t:"sys.SystemUpgrade",authority:"SysUpdate",condition:!global.isDDNS()},{filename:"developerConfig",t:"sys.OpenPlatform",authority:"AuthSysCfg",condition:j.get("Dhop").then(function(a){return a&&a.Support})}]},{category:"info",t:"sys.Information",member:[{filename:"versionConfig",t:"sys.EditionInfo"},{filename:"logManageConfig",t:"sys.SystemLog",condition:k.chkAuthority("QueryLog")||k.chkAuthority("DelLog")},{filename:"onlineUserConfig",t:"sys.Onlineuser",authority:"Account"},{filename:"stateConfig",t:"ivs.LifeCounting",authority:"DefaultConfig",condition:j.get("PtzOperationStatus").then(function(a){return a&&a.Support})}]},{category:"advanced",t:"sys.AdvancedSet",condition:!webCaps.Anonymous&&(-1!==webApp.DeviceType.indexOf("TPC")||-1!==webApp.DeviceType.indexOf("SD")),member:[{filename:"tempCorrectConfig",t:"com.MachineSet",condition:-1!==webApp.DeviceType.indexOf("TPC")},{filename:"focusParamsConfig",t:"com.FocusLensParams",condition:j.get("PtzFunctionMenu").then(function(a){return a&&a.Support&&1!==webApp.CamType&&webApp.CHANNEL_NUMBER>1&&-1!==webApp.DeviceType.indexOf("TPC")})},{filename:"calibrationConfig",t:"com.FusionCalibrate",condition:webApp.CHANNEL_NUMBER>1},{filename:"picmodeConfig",t:"com.PicMode",condition:1!==webApp.CamType&&2!==webApp.CamType&&-1!==webApp.DeviceType.indexOf("TPC")},{filename:"temperModeConfig",t:"com.TmodMode",condition:j.get("RadioMetry").then(function(a){return a&&a.Support&&1!==webApp.CamType&&2!==webApp.CamType})},{filename:"testFunction",t:"com.TestFunction",condition:-1!==webApp.DeviceType.indexOf("TPC")},{filename:"selfTempMeasure",t:"adv.SelfTempMeasure",condition:j.get("RadioMetry").then(function(a){return a&&a.Support&&2===webApp.CamType})}]}]}{var i=require("jsCore/rpc"),j=require("jsCore/ability"),k=(require("common/common").Cookie,require("jsCore/plugin"),require("jsCore/rpcLogin")),l=require("jsCore/pageBase"),m="set-menu-current",n="set-item-current",o=null,p=null,q=webCaps.WebVersion?"?version="+webCaps.WebVersion:"",r=["GENETEC","YXSHOW","PSIA","YXISHOW","HSWX","LechangePro","None","PTVSSP","GAVI"],s=!1;c.exports=l.extend({init:function(){var b=this,c=g(h());s=!1,o=b,b.menuElem=b.$("#set-menu"),b.menuCont=b.$("#set-content");var k=a.grep(webApp.VSPs,function(b){return-1===a.inArray(b,r)});a.each(c,function(b,c){return"network"===c.category?(a.each(k,function(a,b){c.member.push({filename:b,t:b,vsp:"vsp"})}),!1):void 0});var l=a.template(b.$("#menu").html(),{data:c});b.menuElem.html(l).translation(),b.menuElem.find(".set-menu").on("click",d),b.menuElem.find(".set-item").on("click",e),f(c),j.get("AudioFileManager").done(function(a){webApp.IsAudioFileManager=!(!a||!a.Support)}),window.analyseSenceRuleMap={},i.ConfigManager.getConfig("VideoAnalyseGlobal").done(function(b){webCaps.is_new_IVSUI===!0||-1!==webApp.DeviceType.indexOf("TPC")&&1===webCaps.is_new_IVSUI?(analyseSenceRuleMap.Normal=0,analyseSenceRuleMap.FaceDetection=0,analyseSenceRuleMap.NumberStat=0,analyseSenceRuleMap.StereoVision=0,analyseSenceRuleMap.StereoNumber=0,analyseSenceRuleMap.SmokeFire=0):a.isArray(b)&&a.each(b,function(a,b){window.analyseSenceRuleMap[b.Scene.Type]=a})}),(-1!==webApp.DeviceType.indexOf("TPC")||-1!==webApp.DeviceType.indexOf("SD"))&&require.async("jsCore/modules/advanceShow",function(){p=b.$("#set-advance").advanceShow()}),webApp.CloudUpgraderInfo&&"None"!==webApp.CloudUpgraderInfo.State&&(a("[category=system]").prepend('<div class ="set-menu-noted" style="color:#fff;">1</div>'),a("[filename=cloudUpgradeConfig]").append(a.browser.ie7?'<div class ="set-menu-noted" style="color:#fff;background-position: -150px -365px;line-height:15px;">1</div>':'<div class ="set-menu-noted" style="color:#fff;">1</div>')),webApp.peripheralNoMatch&&(a("[category=info]").prepend('<div class ="set-menu-noted" style="color:#fff;">1</div>'),a("[filename=versionConfig]").append(a.browser.ie7?'<div class ="set-menu-noted" style="color:#fff;background-position: -150px -365px;line-height:15px;">1</div>':'<div class ="set-menu-noted" style="color:#fff;">1</div>'))},render:function(){var a=o.menuElem.find("."+n);a.length?a.click():(o.menuElem.find(".set-menu:first").click(),o.menuElem.find(".set-item:first").click()),(-1!==webApp.DeviceType.indexOf("TPC")||-1!==webApp.DeviceType.indexOf("SD"))&&p&&p.advanceShow("render")},leave:function(){s=!0;var b=o.menuElem.find(".set-item."+n),c=b.data("page");c&&a.isFunction(c.leave)&&c.leave(),(-1!==webApp.DeviceType.indexOf("TPC")||-1!==webApp.DeviceType.indexOf("SD"))&&p&&p.advanceShow("leave")},destory:function(){var b=this;b.menuElem.find(".set-item").each(function(b,c){var d=a(c).data("page");d&&(a.isFunction(d.destory)&&d.destory(),a(c).data("page",null))}),b.menuElem.empty(),b.menuCont.empty(),o=null,(-1!==webApp.DeviceType.indexOf("TPC")||-1!==webApp.DeviceType.indexOf("SD"))&&p&&p.advanceShow("destory")}})}})}(jQuery);var g_videoInConflict=function(a){var b=-1!==webApp.DeviceType.indexOf("TPC")?rpc.DevVideoAnalyse:rpc.DevVideoOutput;b.getCollect(0).done(function(b){b&&webApp.IsIPCIntel&&rpc.DevVideoInput.getCapsEx(0,"VideoInConflict").done(function(b){if(b){var d=b.VideoInConflict||{};d.IsConflict&&a.each(d.ConflictTable,function(b,d){var e=a.inArray("DSP",d);e>-1&&c.DSP.conflictTable.push(d[1-e]);var f=a.inArray("TVOut",d);f>-1&&c.TVOut.conflictTable.push(d[1-f])})}})});var c={TVOut:{conflictTable:[],hasConflict:function(){var b=this;return a.Deferred(function(d){var e=0,f=b.conflictTable;f.length?a.each(f,function(a,f){c[f]&&c[f].isEnable&&c[f].isEnable().then(function(){d.resolve()},function(){e++,e==b.conflictTable.length&&d.reject()})}):d.reject()}).promise()},isEnable:function(){return a.Deferred(function(a){rpc.ConfigManager.getConfig("VideoOut").done(function(b){if(b){var c=b.some(function(a){return a.Enable});c?a.resolve():a.reject()}else a.reject()}).fail(function(){a.reject()})}).promise()},disableConflicts:function(){var b=[];return a.each(this.conflictTable,function(a,d){b.push(c[d].disable())}),Promise.all(b)},disable:function(){return a.Deferred(function(b){rpc.ConfigManager.getConfig("VideoOut").done(function(c){c?(a.each(c,function(a,b){b.Enable=!1}),rpc.ConfigManager.setConfig("VideoOut",c).done(function(){b.resolve()})):b.resolve("GetVideoOutError")}).fail(function(){b.resolve("GetVideoOutError")})}).promise()}},DSP:{conflictTable:[],hasConflict:function(){var b=this;return a.Deferred(function(d){var e=0,f=b.conflictTable;f.length?a.each(f,function(a,f){c[f]&&c[f].isEnable&&c[f].isEnable().then(function(){d.resolve()},function(){e++,e==b.conflictTable.length&&d.reject()})}):d.reject()}).promise()},isEnable:function(){return a.Deferred(function(a){rpc.ConfigManager.getConfig("VideoAnalyseRule").done(function(b){if(b){var c=b.some(function(a){return a.some(function(a){return a.Enable})});c?a.resolve():a.reject()}else a.reject()}).fail(function(){a.reject()})}).promise()},disableConflicts:function(){var b=[];return a.each(this.conflictTable,function(a,d){b.push(c[d].disable())}),Promise.all(b)},disable:function(){return a.Deferred(function(b){rpc.ConfigManager.getConfig("VideoAnalyseRule").done(function(c){c?(a.each(c,function(b,c){a.each(c,function(a,b){b.Enable=!1})}),rpc.ConfigManager.setConfig("VideoAnalyseRule",c).done(function(){b.resolve()})):b.resolve("GetVideoAnalyseRuleError")}).fail(function(){b.resolve("GetVideoAnalyseRuleError")})}).promise()}}};return c}(jQuery);