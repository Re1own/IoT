!function(a){define(function(require,a,b){b.exports=require("jsCore/pageTab")}),define("default",function(require,b,c){var d=require("jsCore/rpc"),e=require("jsCore/pageBase"),f=require("jsCore/ability"),g=require("jsCore/rpcLogin"),h=(require("common/common"),null),i=null,j=null,k=!1;c.exports=e.extend({init:function(){h=this,f.get("PTZCaps").done(function(a){a&&a.CheckDeviceOffset&&a.CheckDeviceOffset.Support&&(k=!0)}),isEnable("is_show_FullyDefault")&&"admin"==g.getLoginInfo().username?(d.ConfigManager.getDefault("Network").done(function(a){j=a.eth0.IPAddress}),i=h.$("#d_f_dialog").dialog({confirm:function(){var b=i.find("#d_f_pwd").val();d.MagicBox.resetSystem(b).done(function(){i.dialog("close"),h.tip("success","com.OperateSuccessTip"),a.dialog({title:tl("com.NeedRebootDeviceTip"),content:'<i class="i-dialog-warn"></i><span class="u-dialog-context">'+tl("com.ConfEffectRestartTip")+"</span>",closeable:!1,buttons:[],iconIndex:1}),location.href="http://"+j}).fail(function(a){a[0].error&&268632071===a[0].error.code?(i.find("#d_f_pwd").val(""),i.find(".u-tip").tip("error",tl("sys.AfreshPwdTip"))):a[0].error&&268632085===a[0].error.code?(i.find("#d_f_pwd").val(""),i.find(".u-tip").tip("error",tl("sys.AfreshPwdTip"))):a[0].error&&268632081===a[0].error.code&&(i.find("#d_f_pwd").val(""),i.find(".u-tip").tip("error",tl("sys.ModifyPwdLockedSecond").replace("XXX",a[1].params.remainLockSecond)))})},close:function(){}}).detach().appendTo(document.body)):(h.$("[btn-for=onFullyDefault]").parent("div").remove(),isEnable("is_show_FullyDefault")||h.$("[btn-for=onDefault]").siblings("span").remove())},onDefault:function(){a.confirm(tl("com.Default"),tl("com.DefConfirmConfigTip"),function(){var a=["Network","IPv6","VideoInSensor","Multicast","Web","Https","DVRIP","VideoStandard","VSP_GAYS","VSP_GAYS_SERVER","AccessPoint","DeviceInfo","Telnet","WLan","PtzDevice","MasterSlaveGroup","MasterSlaveGlobal","CalibrateMatrix","RemoteDevice","NetAccessPriority","NetAccessPriorityIPv6","_LoraConnectInfo_","LoginRestriction"];-1!==webApp.DeviceType.indexOf("TPC")&&a.push("CalibratePoints","ThermographyVideoMode","ThermoAlgo","VideoInFocusOptions"),webApp.DeviceType.indexOf("SD")>-1&&-1===webApp.DeviceType.indexOf("TPC")&&a.push("FocusDebugParam","DevPlaceMode","CoordinatesSwitch"),k&&a.push("CheckDeviceOffset"),h.tip("warning",tl("com.LoadingTip"),-1),3===webApp.CamType&&d.TemperCorrection.userTemperCal(webApp.CHANNEL_NUMBER>1?1:0,-273,[0,8191]),d.ConfigManager.restoreExcept(a).done(function(a){f.get("PtzFunctionMenu").done(function(b){b&&-1===webApp.DeviceType.indexOf("IPC")?d.PTZ.reset().done(function(){h.tip("success",tl("com.OperateSuccessTip"))}).fail(function(){h.tip("error",tl("com.OperateFailTip"))}).always(function(){webApp.isNeedReboot(a)?webApp.reboot("com.ConfEffectRestartTip"):d.ConfigManager.getConfig("Language").done(function(a){global.getlang(a)})}):(h.tip("success",tl("com.OperateSuccessTip")),webApp.isNeedReboot(a)?webApp.reboot("com.ConfEffectRestartTip"):d.ConfigManager.getConfig("Language").done(function(a){global.getlang(a)}))})}).fail(function(){h.tip("error",tl("com.OperateFailTip"))})})},onFullyDefault:function(){var a=g.getLoginInfo();i.find("#d_f_username").text(a.username),i.find("#d_f_pwd").val(""),i.dialog("show")}})})}(jQuery);