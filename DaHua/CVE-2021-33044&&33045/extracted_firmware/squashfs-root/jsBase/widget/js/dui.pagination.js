!function(a){a.widget("dui.pagination",{version:"1.0.1",widgetName:"pagination",widgetEventPrefix:"pagination",options:{currentPage:1,pageSize:10,total:0,changePageSize:!1,pageSizeOptions:[10],reSearch:!1,isShowSelect:!1},_create:function(){this.element.toggleClass("u-pagination",!0),this.render(),this.pageInfo=this.element.find(".u-page-info"),this._setupEvents(),this.refresh()},render:function(){var b=this,c="";if(b.options.changePageSize){var d="";a.each(b.options.pageSizeOptions,function(a,c){d+='<option value="'+c+'" '+(c===b.options.pageSize?"selected":"")+">"+c+"</option>"}),c='<div class="left"><span wgt="total"></span>&nbsp;<span data-for="total">'+b.options.total+'</span>&nbsp;<span wgt="piece"></span>',b.options.isShowSelect&&(c+='&nbsp;&nbsp;&nbsp;&nbsp;<span wgt="page"></span><select data-action="changeSize">'+d+'</select><span wgt="piece"></span>'),c+="</div>"}var e='<a href="#" data-action="first" class="i-first"></a><a href="#" data-action="prev" class="i-prev"></a><span class="u-page-info"></span><a href="#" data-action="next" class="i-next"></a><a href="#" data-action="last" class="i-last"></a><input type="text" class="u-input" value="1"/><a href="#" data-action="goto" class="i-go"></a>';b.element.empty().append(c+e).trans_wgt()},refresh:function(){var a=this.options.total,b=this.options.pageSize,c=parseInt(a/b),d=this.options.currentPage;a%b>0&&(c+=1),0===c&&(c=1),this.pageInfo[0].innerHTML=d+" / "+c,this.pages=c,d>this.pages?this.go(this.pages):this.options.changePageSize&&this.go(this.options.currentPage)},total:function(a,b){this.options.total=a,this.element.find("[data-for = total]").html(a),0===this.options.total&&(this.options.currentPage=1),(0===a||b)&&this.element.find(".u-input").val(1),this.refresh()},pageSize:function(a){this.options.pageSize=a,this.refresh()},go:function(a){a>this.pages||1>a||!this.options.reSearch&&this.options.currentPage===a||(this.options.currentPage=a,this.pageInfo.text(this.options.currentPage+" / "+this.pages),this._trigger("change",null,{ui:this,currentPage:a,pageSize:this.options.pageSize,pages:this.pages,total:this.options.total}))},_setupEvents:function(){this._on(this.element,this._handleEvents)},_handleEvents:{"click [data-action]":function(b){var c=a(b.currentTarget).attr("data-action");switch(c){case"first":this.go(1);break;case"prev":this.go(this.options.currentPage-1);break;case"next":this.go(this.options.currentPage+1);break;case"last":this.go(this.pages);break;case"goto":var d=this.element.find(".u-input").val();a.isNumeric(d)&&this.go(d-0)}return!1},"change select":function(b){var c=a(b.currentTarget).attr("data-action");"changeSize"===c&&this.pageSize(a(b.currentTarget).val()-0)},"blur input":function(){var b=this.element.find(".u-input"),c=b.val()-0;return a.isNumeric(c)?parseInt(c)>this.pages?b.val(this.pages):parseInt(c)<1&&b.val(1):b.val(1),!1},"keyup input":function(){var a=this.element.find(".u-input"),b=a.val();return/^\d+$/.test(b)||a.val(b.substr(0,b.length-1)),!1}}})}(jQuery);