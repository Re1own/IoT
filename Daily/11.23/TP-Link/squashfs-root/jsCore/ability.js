!function(a){define(["jsCore/rpc"],function(require,b,c){function d(b){var c=this;T("NetApp","getNetInterfaces",arguments[1]).done(function(d){if(a.isArray(d))switch(b){case"3G":c.resolve(!!a.grep(d,function(a){return"3G"===a.Name&&-1===a.Type.indexOf("TD-LTE")&&-1===a.Type.indexOf("FDD-LTE")}).length);break;case"4G":c.resolve(!!a.grep(d,function(a){return-1!==a.Type.indexOf("TD-LTE")||-1!==a.Type.indexOf("FDD-LTE")}).length);break;case"WIFI":c.resolve(!!a.grep(d,function(a){return"Wireless"===a.Type&&"eth2"===a.Name}).length);break;default:c.resolve(!1)}else c.resolve(!1)}).fail(function(){c.resolve(!1)})}function e(a){var b=this;T("Alarm","getAlarmCaps",arguments[1]).done(function(c){if(c)switch(a){case"AlarmPir":b.resolve(c.AlarmPir);break;case"Flash":b.resolve(c.Flash);break;default:b.resolve(!1)}else b.resolve(!1)}).fail(function(){b.resolve(!1)})}function f(){var b=this;T("MagicBox","getDeviceType",arguments[1]).done(function(c){b.resolve("string"===a.type(c)?c:"")}).fail(function(){b.resolve("")})}function g(){var a=this;T("OSDManager","getCustomCaps",arguments[1]).done(a.resolve).fail(function(){a.resolve(null)})}function h(){var a=this;T("MagicBox","getSerialNo",arguments[1]).done(a.resolve).fail(function(){a.resolve("")})}function j(){var b=this;T("MagicBox","getDeviceClass",arguments[1]).done(function(c){b.resolve("string"===a.type(c)?c:"")}).fail(function(){b.resolve("")})}function k(){var a=this;T("MagicBox","getSoftwareVersion",arguments[1]).done(function(b){a.resolve(b)}).fail(function(){a.resolve("")})}function l(b){var c=this,d=a.inArray(b,X);T("MagicBox","getProductDefinition",arguments[1],[X]).done(function(b){c.resolve(a.isArray(b)&&b[d].result&&b[d].params?b[d].params.definition:null)}).fail(function(){c.resolve(null)})}function m(){var a=this;T("VideoProcessManager","getCaps",arguments[1],["LDC"]).done(function(b){a.resolve(b)}).fail(function(){a.resolve(!1)})}function n(){var a=this;T("Alarm","getInSlots",arguments[1]).done(a.resolve).fail(function(){a.resolve(0)})}function o(){var a=this;T("Alarm","getOutSlots",arguments[1]).done(a.resolve).fail(function(){a.resolve(0)})}function p(){var a=this;T("DevVideoInput","getCollect",arguments[1]).done(a.resolve).fail(function(){a.resolve(0)})}function q(){var a=this;T("DevVideoInput","getCaps",arguments[1]).done(a.resolve).fail(function(){a.resolve(null)})}function r(){var a=this;T("DevVideoInput","getCapsEx",arguments[1]).done(a.resolve).fail(function(){a.resolve(null)})}function s(){var a=this;T("WideViewControl","getCaps",arguments[1],[0,"WideViewControl"]).done(a.resolve).fail(function(){a.resolve(null)})}function t(){var a=this;T("Security","getEncryptInfo",arguments[1]).done(a.resolve).fail(function(){a.resolve(null)})}function u(){var a=this;T("WireLessLora","getCaps",arguments[1]).done(a.resolve).fail(function(){a.resolve(null)})}function v(){var a=this;T("DevIntelliTracker","getCaps",arguments[1]).done(a.resolve).fail(function(){a.resolve(null)})}function w(){var a=this;T("SleepingControl","getCaps",arguments[1]).done(a.resolve).fail(function(){a.resolve(null)})}function x(a){var b=this;T("DevVideoInput","getCapsEx",arguments[1]).done(function(c){return c&&c.ImageStabilization&&c.ImageStabilization.Type?"OcxStabilization"===a?b.resolve(!!(4&c.ImageStabilization.Type)):"OpticsStabilization"===a?b.resolve(!!(2&c.ImageStabilization.Type)):"ElecStabilization"===a?b.resolve(!!(1&c.ImageStabilization.Type)):void 0:b.resolve(!1)}).fail(function(){b.resolve(!1)})}function y(){var a=this;T("DevAudioInput","getCollect",arguments[1]).done(a.resolve).fail(function(){a.resolve(0)})}function z(){var a=this;T("DevAudioInput","getCaps",arguments[1]).done(a.resolve).fail(function(){a.resolve(null)})}function A(){var a=this;T("DevAudioOutput","getCaps",arguments[1]).done(a.resolve).fail(function(){a.resolve(null)})}function B(){var a=this;T("DevAudioDetect","getCaps",arguments[1]).done(a.resolve).fail(function(){a.resolve(null)})}function C(){var a=this;T("DevVideoDetect","getCaps",arguments[1]).done(a.resolve).fail(function(){a.resolve(null)})}function D(){var a=this;T("DevAudioOutput","getCollect",arguments[1]).done(a.resolve).fail(function(){a.resolve(0)})}function E(){var a=this;T("DevVideoAnalyse","getCaps",arguments[1]).done(a.resolve).fail(function(){a.resolve(null)})}function F(){var a=this;T("ScenicSpot","getCaps",arguments[1]).done(a.resolve).fail(function(){a.resolve(null)})}function G(){var a=this;T("NetApp","getNetCaps",arguments[1]).done(a.resolve).fail(function(){a.resolve(null)})}function H(){var a=this;T("RecordManager","getCaps",arguments[1]).done(a.resolve).fail(function(){a.resolve(null)})}function I(){var a=this;T("PTZ","getCurrentProtocolCaps",arguments[1]).done(a.resolve).fail(function(){a.resolve(null)})}function J(){var a=this;T("FaceBoard","getCaps",arguments[1]).done(a.resolve).fail(function(){a.resolve(null)})}function K(){var a=this,b=0;-1!==webApp.DeviceType.indexOf("SD")?T("PTZ","getPresets",arguments[1]).done(function(c){c?T("ConfigManager","getConfig",arguments[1],["PtzMovement"]).done(function(c){for(i=0;i<c.length;i++){var d=c[i];if("Preset"==d.Function){b=d.Index+1;break}b=0}a.resolve(b)}).fail(function(){a.resolve(b)}):a.resolve(b)}).fail(function(){a.resolve(b)}):a.resolve(b)}function L(b){var c=this;-1!==webApp.DeviceType.indexOf("TPC")?c.resolve(!1):T("ConfigManager","getConfig",arguments[1],["SmartEncode"]).done(function(d){d&&d[0]&&d[0].Enable?ability.get("VideoInputCapsEx").done(function(d){var e=!1;if(d&&d.VideoInConflict&&d.VideoInConflict.IsConflict){var f;"DSPConflict"===b?f="DSP":"ROIConflict"===b?f="ROI":"ExtraConflict"===b?f="Extra2":"RotateConflict"===b?f="Rotate_90":"TVOutConflict"===b?f="TVOut":"BitrateConflict"===b&&(f="DynamicBitrate"),a.each(d.VideoInConflict.ConflictTable,function(b,c){return-1!==a.inArray("SmartEnc",c)&&-1!==a.inArray(f,c)?(e=!0,!1):void 0})}c.resolve(e)}):c.resolve(!1)}).fail(function(){c.resolve(!1)})}function M(a){var b=this;T("MagicBox","getProcessInfo",arguments[1]).done(function(c){b.resolve(-1!==c.toUpperCase().indexOf(a))}).fail(function(){b.resolve(!1)})}function N(){var a=this;T("MagicBox","getProcessInfo",arguments[1]).done(a.resolve).fail(function(){a.resolve("")})}function O(){var a=this;T("ConfigManager","getConfig",arguments[1],["VideoStandard"]).done(a.resolve).fail(function(){a.resolve("")})}function P(){var a=this;T("EventManager","getCaps",arguments[1]).done(a.resolve).fail(function(){a.resolve(null)})}function Q(){var a=this;T("ExternalSensorManager","getCaps",arguments[1]).done(a.resolve).fail(function(){a.resolve(null)})}function R(){var a=this;T("LensFunc","getDebugCaps",arguments[1]).done(a.resolve).fail(function(){a.resolve(null)})}function S(){var a=this;T("CoaxialControlIO","getCaps",arguments[1]).done(a.resolve).fail(function(){a.resolve(null)})}function T(a,b,c,d){var e=a+"."+b+(d?d.toString():""),f=Y[e];return(c||!f)&&(f=Y[e]=U[a][b].apply(U[a],d||[]).done(function(a){null===a&&delete Y[e]}).fail(function(){delete Y[e]})),f}var U=require("jsCore/rpc"),V={AlarmPir:e,Flash:e,"3G":d,WIFI:d,"4G":d,OcxStabilization:x,OpticsStabilization:x,ElecStabilization:x,LDC:m,S2:M,HI:M,A5S:M,DM36:M,DM38:M,DSPConflict:L,ROIConflict:L,ExtraConflict:L,RotateConflict:L,TVOutConflict:L,BitrateConflict:L},W={DeviceType:f,AlarmIn:n,AlarmOut:o,ChannelNum:p,SerialNo:h,AudioInputNum:y,AudioOutputNum:D,AudioInputCaps:z,AudioOutputCaps:A,AudioDetectCaps:B,VideoDetectCaps:C,EncryptInfo:t,DeviceClass:j,SoftwareVersion:k,VideoStandard:O,WideViewControl:s,RecordCaps:H,VideoInputCaps:q,VideoInputCapsEx:r,OSDCustom:g,PTZCaps:I,ProcessInfo:N,IVSCaps:E,FaceBoardCaps:J,getPreset:K,EventCaps:P,ExternalSensorCaps:Q,LensDebugCaps:R,ScenicSpotCaps:F,NetModeList:G,WireLessLora:u,TrackScale:v,SleepingControl:w,IOCaps:S},X=["HasPtz","IsPtzAlarm","VSP","MaxExtraStream","CameraSwitchComV","IsLocalStore","IEEE802_1X","VPN","SupportedWPS","CameraAttribute","PtzFunctionMenu","LightingControl","RainBrushControl","CifPFrameSize","AudioFileManager","AudioProperties","WirelessAlarm","GB28181","VolumeDetect","AnomalyDetect","MutationDetect","MajorVersion","MinorVersion","VendorAbbr","OEMVersion","Revision","TypeVersion","BuildDate","WebVersion","MaxPreRecordTime","PTZFunctionViaApp","IntelliTracker","VSPs","FontColour","FontBorder","FontSize","QueryDatabase","PtzManualMotionDetect","VideoAnalyse","VideoStandards","Languages","SnapshotInterval","IsGpsInfoOsd","PtzOperationStatus","Focus","Iris","RotateResolutionLimit","EncodingResolutionLimit","SpecVer","LensControl","LensControlMix","smallPtz","FireWarning","TemperatureDifference","PresetFocusROI","IntelligentFocus","Industry","SteadyLightControl","CSCMatrixSwitch","TrackPositionLimit","AroudWifiSearch","VideoOutControlMode","CaptureSetResolution","SupportHardwarePtzDevice","AudioTalkMode","PtzDirectionCalibration","MeasureDistance","EncodePriority","PtzViewSector","SyncTime","SupportFlipTransducer","MagSensor","SIMLimit","OSDMobileState","LensZoomThermal","SupportAudioChangeVoice","EmailIntervalVisible","UWBConfig","DynamicROI","PtzRoadInfo","FaceDetection","SupportTempSensing","BFFunction","AutoFocus","StreamAuthority","SSHD","ConfigBackupFilelist","SupportedTrafficTrustList","BurningCheck","DecodeBuf","VideoInImageGird","HLSCaps","SupportCloudUpgrade","SupportSetPtzTour","HighZoomPtzMoveAdaptor","LaserControl","RadioMetry","FaceAnalysis","ShutterAbnormal","IntelliFrameCaps","HotColdSpotTrace","IsProtectCover","SpecifyAreaEnhance","HasPtzMCU","IPCRecordBatchDownload","SupportShortTour","SuggestEncode","SupportMultiRTPDH","P2P","SupportShowMultiTS","PrivacyMasking","NetMode","SupportPtzFunction","AutoFocusButtonVisible","AutoFocusButtonThermal","ZoomThermal","FocusThermal","IsSimplifiedPtz","ShowPtzMoveStatus","SupportPlateDetectCfg","AudioProperty","ObjectTrack","VideoConfig","MultVideoSensor","PtzAutoMovement","IdleMotion","SupportPtzCfgImExport","PanoramaDrag","PicInPic","SFFCFunc","SupportTrafficPreSendPic","SupportMediaEncrypt","SupportCGICfg","SupportOnvifCfg","SupportGenetecCfg","SupportMobilePush","SupportFileBackupEncrypt","SystemService","SupportBitRateUnite","BlkBdySampFunc","GPS","Dhop","SupportPresetOsdTime","CameraUpdatePowerOff","SupportDHTSforRTSP","MulNetwokrDial","SupportPirMotionRegion","ThermDenoiseFunc","SupportPreceptionPlatformAccess","ObjectDetect","SupportOsdRestructure","SupportGB35114Level","SupportMutiGB","FlowStat","SupportSafetyAbnormalAlarm","IPTableFilter","AutoFovCalibrate","ThermographyFusion","Dhop"];a.each(X,function(a,b){W[b]=l}),c.exports={is:function(b,c){return a.Deferred(function(a){"function"==typeof V[b]&&V[b].call(a,b,c)}).promise()},get:function(b,c){return a.Deferred(function(a){"function"==typeof W[b]&&W[b].call(a,b,c)}).promise()},clear:function(){Y={}}};var Y={}})}(jQuery);