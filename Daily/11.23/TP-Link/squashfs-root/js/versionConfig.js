!function(a){define(function(require,a,b){b.exports=require("jsCore/pageTab")}),define("version",function(require,b,c){var d,e,f,g,h=require("jsCore/rpc"),i=require("jsCore/ability"),j=require("jsCore/pageBase");c.exports=j.extend({init:function(){var a=this;d=h.IntervideoManager.getVersion("Onvif"),g=i.get("ExternalSensorCaps"),h.PeripheralChip.getCaps().done(function(b){b&&b[0]&&b[0].type&&(a.$("#v_hardwareVersion").parent().show(),h.PeripheralChip.getVersion(b[0].type).done(function(b){a.$("#v_hardwareVersion").text(b[0].softwareVersion),b[0].isMatching||a.$("#v_isMatching").text(tl("sys.NotMatchVerTip"))}))}).always(function(){a.render()})},leave:function(){jQuery("body").off("copy.versionConfig")},render:function(){var b=this,c="",j="";if(e=h.MagicBox.getSubModules(),f=h.MagicBox.getHardwareType(),i.get("DeviceType").done(function(a){isEnable("show_Device_type")&&b.$("#v_devicetype").text(a).parent().show()}),i.get("SerialNo").done(function(a){b.$("#v_serialnumber").text(a)}),-1!==webApp.DeviceType.indexOf("SD")&&h.CameraModule.getSerialNo(0).done(function(a){a&&a.sn&&b.$("#v_mechanismNum").text(a.sn).parent().show()}),d.done(function(a){a&&a.Onvif&&b.$("#v_onvifversion").text(a.Onvif).parent().show()}),g.done(function(a){a&&a.SupportLabelInfo&&h.RfidManager.getVersion().done(function(a){a&&b.$("#v_rfidVersion").text(a).parent().show()})}),h.ConfigManager.getConfig("VSP_GAYS").done(function(a){a&&a.Version&&"SimpChinese"===global.currentLanguage&&b.$("#v_gaysversion").text(a.Version).parent().show()}),i.get("SoftwareVersion").done(function(a){j=a.version.Version+", Build Date: "+a.version.BuildDate,-1===webApp.DeviceType.indexOf("TPC")&&f.done(function(d){d&&d.type&&(c="."+d.type,j=a.version.Version+c+", Build Date: "+a.version.BuildDate,b.$("#v_softversion").text("V"+j))}),b.$("#v_softversion").text("V"+j),a.version.WebVersion&&b.$("#v_webedition").text(a.version.WebVersion),a.version&&a.version.SecurityBaseLineVersion&&(b.$("#v_baseLineVersion").parent().removeClass("fn-hide"),b.$("#v_baseLineVersion").text(a.version.SecurityBaseLineVersion))}),e.done(function(c){a.each(c,function(a,c){var d=c.SoftwareVersion;if("Unknow"!==d&&""!==d){switch(c.ModuleName){case"PTZ":b.$("#v_ptzversion").text("V"+d).parent().show();break;case"MCU-APP":b.$("#v_scmversion").text(d).parent().show();break;case"Camera":"FF.FF.FF"!==d&&(2===webApp.CamType&&b.$("#v_cameraversion").prev().text(tl("com.Visible")+tl("sys.CameraVersion")),b.$("#v_cameraversion").text(d).parent().show());break;case"ISP":b.$("#v_ispversion").text(d).parent().show()}c&&c.EncrychipVersion&&b.$("#v_35114version").text(c.EncrychipVersion).parent().show()}})}),webApp.CloudAutoCheck&&webApp.CloudUpgraderInfo&&"None"!==webApp.CloudUpgraderInfo.State&&(webApp.CloudUpgraderInfo.PackageType.toLowerCase().indexOf("ptz")>-1?b.$("#v_findptzversion").removeClass("fn-hide"):b.$("#v_findnewversion").removeClass("fn-hide")),2===webApp.CamType||3===webApp.CamType){var k=webApp.CHANNEL_NUMBER>1?1:0;h.ThermographyManager.getExternSystemInfo(k).done(function(a){var c=2===webApp.CamType?a.SoftwareVersion.substring(8):a.SoftwareVersion;b.$("#v_chipversion").text(c).parent().show()})}b._bindCopyEvent()},_bindCopyEvent:function(){function a(){for(var a=[],b=jQuery("[data-page=version]").find(".ui-form-item"),c=0,d=b.length;d>c;c++)b.eq(c).is(":hidden")&&a.push(b.eq(c).find("label.ui-label").text()),b.eq(c).find('[btn-for="gotoUpgrade"]').is(":hidden")&&a.push(b.eq(c).find('[btn-for="gotoUpgrade"]').text());return a}jQuery("body").off("copy.versionConfig").on("copy.versionConfig",function(){if(window.clipboardData){event.returnValue=!1;for(var b=document.selection.createRange().text,c=a(),d=0,e=c.length;e>d;d++)b=b.replace(c[d],"");b=b.replace(/(\s)+/g,"$1"),window.clipboardData.setData("Text",b)}})},gotoUpgrade:function(){a("[category=system]").find(".set-menu").click(),a("[filename=cloudUpgradeConfig]").click()}})})}(jQuery);