!function(a){define(function(require,a,b){b.exports=require("jsCore/pageTab")}),define("automaintain",function(require,b,c){var d,e,f=require("jsCore/rpc"),g=require("jsCore/rpcLogin"),h=require("common/common"),i=require("jsCore/pageBase");c.exports=i.extend({init:function(){var a=this;return g.chkAuthority("ShutDown")||a.$("[btn-for=onReboot]").remove(),a.$("#a_r_time").timefield({showS:!1}),a.$("#a_d_days").numberfield({max:31,min:1,allowDecimal:!1,allowNegative:!1}),a.$("#am_showAR,#am_showAD").click(function(b){var c=a.$(b.target),d=c.prop("checked"),e=c.attr("showfor"),f=a.$("#"+e);d?f.show():f.hide()}),a.render(),a},render:function(){return this._getConfig(),this},_getConfig:function(a){var b=this;f.ConfigManager.getConfig(["AutoMaintain","StorageGlobal"]).done(function(c){d=c[0].params.table,e=c[1].params.table,d&&e?(b._renderElement(d,e),b.disabled(b.$("a[btn-for=onSave]"),!1),a&&b.tip("success",tl("com.OperateSuccessTip"))):(b.disabled(b.$("a[btn-for=onSave]"),!0),b.tip("error",tl("com.OperateFailTip")))}).fail(function(){b.disabled(b.$("a[btn-for=onSave]"),!0),b.tip("error",tl("com.OperateFailTip"))})},_renderElement:function(a,b){var c=this;c.$("#am_showAR").prop("checked",a.AutoRebootEnable),a.AutoRebootEnable?c.$("#a_r_show").show():c.$("#a_r_show").hide(),c.$("[sel-for=onSelectDay]").val(a.AutoRebootDay),c.$("#a_r_time").timefield("value",a.AutoRebootHour+":"+a.AutoRebootMinute+":0"),c.$("#am_showAD").prop("checked",b.FileHoldTime),b.FileHoldTime?c.$("#a_d_show").show():c.$("#a_d_show").hide(),c.$("#a_d_days").numberfield("value",b.FileHoldTime)},onRefresh:function(){var a=this;return a._getConfig(!0),!1},onSave:function(){function b(){f.ConfigManager.setConfig(["AutoMaintain","StorageGlobal"],[d,e]).done(function(a){h.chkMutilCallRet(a)?c.tip("success",tl("com.SaveSuccessTip")):c.tip("error",tl("com.SaveConfigFailTip"))})}var c=this;d.AutoRebootEnable=c.$("#am_showAR").prop("checked"),d.AutoRebootDay=c.$("[sel-for=onSelectDay]").val()-0;var g=c.$("#a_r_time").timefield("value").split(":");return d.AutoRebootHour=g[0]-0,d.AutoRebootMinute=g[1]-0,e.FileHoldTime=c.$("#am_showAD").prop("checked")?c.$("#a_d_days").numberfield("value"):0,c.$("#am_showAD").prop("checked")?a.confirm(tl("com.Prompt"),tl("sys.DelFileTip"),b,function(){return!1},!0):b(),!1},onReboot:function(){return webApp.reboot("com.SureToRebootTip",!0),!1}})})}(jQuery);