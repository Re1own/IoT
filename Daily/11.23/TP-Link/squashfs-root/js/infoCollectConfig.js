!function(a){define(function(require,a,b){b.exports=require("jsCore/pageTab")}),define("inf_set",function(require,b,c){var d=require("jsCore/rpc"),e=require("jsCore/pageBase");require("jsCore/modules/eventHandler");var f=require("jsCore/hlsplayer"),g=require("jsCore/flashplayer"),h=require("jsCore/h5player"),i=null,j=null,k=0,l=null,m=null;c.exports=e.extend({init:function(){j=this,m=j.$("#inf_SignalThreshold").parent("div"),webApp.EventCaps?d.EventManager.getEventLink("LabelInfoAlarm").done(function(b){var c=b.name,d=a.extend({},webApp.DefaultEvent),e=webApp.EventCaps;"default"===c[k][0]?d=e:c[k].each(function(a){d[a]=!0,"AlarmOutEnable"===a?d.AlarmOutLatch=e.AlarmOutLatch:"DejitterEnable"===a?d.DejitterRange=e.DejitterRange:"RecordEnable"===a&&(d.RecordLatch=e.RecordLatch)}),j.$("#ana_eventHandler").eventHandler(d)}).fail(function(){j.$("#ana_eventHandler").eventHandler()}):j.$("#ana_eventHandler").eventHandler(),l=j.$("#inf_SignalThreshold").slider({min:1,max:100}),d.RfidManager.getReceiverID().done(function(a){j.$("#inf_receiverID").text(a)}),j.$("#inf_eable").click(function(b){a(b.target).prop("checked")?(m.show(),d.RfidManager.getSignalThreshold().done(function(a){l.slider("value",a)})):m.hide()}),j.render()},render:function(b){"hls"==webApp.playMode?(f.cover(j.$("#inf_video")),plugin.hide(),f.init("","",""),f.beginPlay()):"flash"==webApp.playMode?(g.cover(j.$("#inf_video")),g.playPreview(1,0)):"h5"===webApp.playMode?(h&&h.playPreview(1,0,j.$("#inf_video")),d.ConfigManager.getConfig(["Encode","VideoImageControl"]).done(function(a){if(webApp.resolution.x=a[0].params.table[0].MainFormat[0].Video.Width,webApp.resolution.y=a[0].params.table[0].MainFormat[0].Video.Height,1==a[1].params.table[0].Rotate90||2==a[1].params.table[0].Rotate90){var b;b=webApp.resolution.x,webApp.resolution.x=webApp.resolution.y,webApp.resolution.y=b}})):plugin.cover("#inf_video",function(){plugin.SetModuleMode(1),plugin.open()}),a.when(d.ConfigManager.getConfig("LabelInfoAlarm")).done(function(a){i=a,j._renderElement(),b&&j.$("#inf_tip").tip("success",tl("com.OperateSuccessTip"))}).fail(function(){b&&j.$("#inf_tip").tip("error",tl("com.OperateFailTip"))})},_renderElement:function(){j.$("#inf_eable").prop("checked",i[k].Enable),i[k].Enable?(m.show(),d.RfidManager.getSignalThreshold().done(function(a){l.slider("value",a)})):m.hide(),j.$("#inf_eventHandler").eventHandler("set",i[k].EventHandler)},leave:function(){plugin.hide(),plugin.close(),f&&f.hideAndStopLoad(),g&&g.hide(),h&&h.hide()},onConfirm:function(){var b=l.slider("value");i[k].Enable=j.$("#inf_eable").prop("checked"),i[k].EventHandler=j.$("#inf_eventHandler").eventHandler("get"),a.when(d.ConfigManager.setConfig("LabelInfoAlarm",i)).done(function(){i[k].Enable&&d.RfidManager.setSignalThreshold(b).done(function(){}),j.$("#inf_tip").tip("success",tl("com.SaveSuccessTip"))}).fail(function(){j.$("#inf_tip").tip("error",tl("com.SaveConfigFailTip"))})},onDefault:function(){d.ConfigManager.getDefault("LabelInfoAlarm").done(function(a){i=a,j._renderElement(),j.$("#inf_tip").tip("success",tl("com.DefaultSuccessTip"))}).fail(function(){j.$("#inf_tip").tip("error",tl("com.DefaultfailureTip"))})},onRefresh:function(){j.render(!0)}})})}(jQuery);